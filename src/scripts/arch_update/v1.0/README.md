# ArchUpd: Secure Rolling-Release Toolchain

**ArchUpd** ‚Äî —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Arch Linux. –û–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –∑–∞—â–∏—Ç—ã, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â—É—é –ø–æ—Ç–µ—Ä—é –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–∑–ª–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

> **üìä –°—Ç–∞—Ç—É—Å:** –°—Ç–∞–±–∏–ª–µ–Ω. –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ Arch Linux (–Ø–Ω–≤–∞—Ä—å 2026)
> 
> **üõ°Ô∏è Hardening Index:** –ü–æ–º–æ–≥–∞–µ—Ç –¥–æ—Å—Ç–∏—á—å **70-75 –±–∞–ª–ª–æ–≤** –ø–æ –∞—É–¥–∏—Ç—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Lynis

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

–≠—Ç–æ—Ç —Ç—É–ª—á–µ–π–Ω –≤–Ω–æ—Å–∏—Ç –≥–ª—É–±–æ–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:

### üîç **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ**

1.  **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞**  
    –°–∫—Ä–∏–ø—Ç –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ —Ä–∞–∑–¥–µ–ª `/boot` —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø—É—Ç–∏.

2.  **–¢–∏–ø —è–¥—Ä–∞**  
    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —è–¥—Ä–æ `linux`. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `linux-lts`, `linux-zen` –∏–ª–∏ `linux-hardened`, **–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Ä—É—á–Ω—É—é –∏–∑–º–µ–Ω–∏—Ç—å –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤** –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏ `archupd.sh` (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã `vmlinuz-linux` –∏ `initramfs-linux.img`).

3.  **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**  
    –†–µ—à–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è **EXT4**. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å–Ω–∏–º–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `rsync`-—Ä–µ–∂–∏–º Timeshift.

4.  **–°–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫**  
    –ò–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä –≤–Ω–æ—Å–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `sysctl` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∞—Ç–∞–∫. –≠—Ç–æ –º–æ–∂–µ—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞.

---

## üõ°Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞—â–∏—Ç—ã

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –£—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã |
|---------|----------|----------------|
| **üîí Immutable Boot** | –†–∞–∑–¥–µ–ª `/boot` –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ `Read-Only`. –ó–∞—â–∏—â–∞–µ—Ç —è–¥—Ä–æ –∏ –∑–∞–≥—Ä—É–∑—á–∏–∫ –æ—Ç –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–º –ü–û | –í—ã—Å–æ–∫–∏–π |
| **üì∏ Automatic Snapshots** | –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Å–Ω–∏–º–∫–æ–≤ —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ Timeshift –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º | –í—ã—Å–æ–∫–∏–π |
| **‚úÖ Kernel Integrity Check** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤ —è–¥—Ä–∞ –≤ `/boot` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π |
| **‚öôÔ∏è Sysctl Hardening** | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —è–¥—Ä–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥–∞–º–ø–æ–≤ –ø–∞–º—è—Ç–∏, –∑–∞–ø—Ä–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –∏ —Ç.–¥.) | –°—Ä–µ–¥–Ω–∏–π |

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-username/archupd.git
cd archupd
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä–∞

```bash
chmod +x install_archupd.sh
sudo ./install_archupd.sh
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –î–ª—è Zsh
source ~/.zshrc

# –î–ª—è Bash
source ~/.bashrc
```

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
```bash
archupd
```

### üìã –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã
1.  **–°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–∞** —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ Timeshift
2.  **–ü–µ—Ä–µ–≤–æ–¥ `/boot`** –≤ —Ä–µ–∂–∏–º –∑–∞–ø–∏—Å–∏ (RW)
3.  **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –∫–ª—é—á–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ —Å–∏—Å—Ç–µ–º—ã
4.  **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** —Ñ–∞–π–ª–æ–≤ —è–¥—Ä–∞
5.  **–í–æ–∑–≤—Ä–∞—Ç `/boot`** –≤ —Ä–µ–∂–∏–º –∑–∞—â–∏—Ç—ã (RO)
6.  **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** (–ø—Ä–∏ —É—Å–ø–µ—Ö–µ)

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (Troubleshooting)

### ‚ùå **–û—à–∏–±–∫–∞: "–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –Ø–¥—Ä–æ –ø–æ—Ç–µ—Ä—è–Ω–æ!"**
–§–∞–π–ª—ã —è–¥—Ä–∞ –≤ `/boot` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. **–ù–µ –≤—ã–∫–ª—é—á–∞–π—Ç–µ –ü–ö!**

#### **–†–µ—à–µ–Ω–∏–µ:**
```bash
# 1. –ü–µ—Ä–µ–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ boot
sudo mount -o remount,rw /boot

# 2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —è–¥—Ä–æ
sudo pacman -S linux

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤
ls /boot/vmlinuz-linux /boot/initramfs-linux.img
```

### üîì **–û—à–∏–±–∫–∞: "unable to lock database"**
–í–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –ø—Ä–µ—Ä–≤–∞–Ω–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ `pacman`.

#### **–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo rm /var/lib/pacman/db.lck
```

### ‚è™ **–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞–∑–∞–¥?**
–ü—Ä–∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

#### **–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
```bash
sudo timeshift-launcher
```
1.  –í—ã–±–µ—Ä–∏—Ç–µ —Å–Ω–∏–º–æ–∫ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º "Before archupd"
2.  –ù–∞–∂–º–∏—Ç–µ **Restore**

#### **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Live-USB**
–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è:
1.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å —Å Live-USB Arch
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Timeshift
3.  –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:
```bash
timeshift --restore
```

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

| –ü–∞–∫–µ—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ |
|-------|------------|-----------|
| **usbguard** | –ö–æ–Ω—Ç—Ä–æ–ª—å USB-–ø–æ—Ä—Ç–æ–≤ | `sudo pacman -S usbguard` |
| **lynis** | –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | `sudo pacman -S lynis` |
| **fail2ban** | –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force –∞—Ç–∞–∫ | `sudo pacman -S fail2ban` |
| **rkhunter** | –ü–æ–∏—Å–∫ —Ä—É—Ç–∫–∏—Ç–æ–≤ | `sudo pacman -S rkhunter` |

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

**MIT License**  
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ê–≤—Ç–æ—Ä—ã –Ω–µ –Ω–µ—Å—É—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–±–æ–∏ –≤ —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ.

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –Ø–Ω–≤–∞—Ä—å 2026*  
*–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: 2.1*